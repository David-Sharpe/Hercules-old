// Generated by CoffeeScript 1.12.7
(function() {
  var app, user_id, workout_id;

  app = angular.module('ResistanceExercise', []);

  user_id = gon.user_id;

  workout_id = 1;

  app.controller('ResistanceWorkoutsController', [
    '$http', '$log', function($http, $log) {
      var user_workouts, workout;
      user_workouts = this;
      this.selected_workout = null;
      $http.get('/resistance_workouts.json?user_id=' + user_id).success(function(data) {
        user_workouts.workouts = data;
        this.selected_workout = user_workouts[0];
      }).error(function(data) {});
      workout = this;
      this.load_workout = function(data) {
        workout_id = this.selected_workout.id;
        workout.exercises = [
          {
            'name': 'Bench'
          }, {
            'name': 'Squat'
          }
        ];
        return $http.get('/resistance_exercises.json?workout_id=' + workout_id).success(function(data) {
          workout.exercises = data;
          $log.log(workout.exercises);
        }).error(function(data) {});
      };
      this.create_workout = function(data) {
        return $http.post('/resistance_workouts.json?user_id=' + user_id).success(function(data) {
          $log.log('Made new workout');
          return user_workouts.workouts.push(data);
        }).error(function(data) {
          $log.log('Workout create error');
        });
      };
      this.save = function(data) {
        $log.log("data.url = " + data.url);
        $log.log("Saving " + JSON.stringify(data));
        return $http.put('/resistance_exercises/' + data.id + '.json', JSON.stringify(data)).success(function(data) {
          return $log.log("Successful save");
        }).error(function(data) {
          $log.log("Error");
        });
      };
      this["delete"] = function(data) {
        $log.log("Deleting" + JSON.stringify(data));
        return $http["delete"]('/resistance_exercises/' + data.id).success(function(data) {
          $log.log("Deleted");
          return workout.exercises.splice(data.index, 1);
        }).error(function(data) {
          $log.log("Error");
        });
      };
      this.create = function() {
        $log.log('Posting');
        return $http.post('/resistance_exercises.json', '{"name":""}').success(function(data) {
          $log.log(data);
          data.workout_id = workout_id;
          return workout.exercises.push(data);
        }).error(function(data) {
          $log.log("Error");
        });
      };
      return workout;
    }
  ]);

  return;

}).call(this);
